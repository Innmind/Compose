arguments:
    first: int
    second: stdClass ?? $inner.fallback.forBar
    third: '?array'

expose:
    foo: '$inner.bar'
    baz: '$inner.baz'
    set: '$ints'
    stream: '$strings'
    map: '$fixtures'
    stack: '$fixtureStack'

services:
    inner:
        bar Fixture\Innmind\Compose\ServiceFixture:
            - '$first'
            - '$second'
            - '$third'

        baz Fixture\Innmind\Compose\ServiceFixture:
            - '$first'
            - '$inner.fallback.forBar'

        fallback:
            forBar stdClass: []

    ints set<int>:
        - 1
        - 2
        - 42

    strings stream<string>:
        - foo
        - bar
        - baz

    fixtures map<string, Fixture\Innmind\Compose\ServiceFixture>:
        - <bar, $inner.bar>
        - <baz, $inner.baz>

    fixtureStack stack:
        - $stack.high
        - $stack.middle
        - $stack.low

    stack:
        low Fixture\Innmind\Compose\Stack\Low: []
        middle Fixture\Innmind\Compose\Stack\Middle:
            - '@decorated'
        high Fixture\Innmind\Compose\Stack\High:
            - '@decorated'
